{% extends 'base.html' %}

{% block title %}Menu | MealMate{% endblock %}

{% block content %}
<div class="container">
    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
        <img src="{{ restaurant.picture }}"
            style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-right: 20px;"
            onerror="this.onerror=null;this.src='https://placehold.co/100x100?text=No+Logo';">
        <div>
            <h1>{{ restaurant.name }}</h1>
            <p class="text-muted">
                {{ restaurant.cuisine }} •
                <span style="color: var(--secondary-color); font-size: 1.2rem;">
                    {% load custom_filters %}
                    {% for star in restaurant.rating|to_stars %}
                    {% if star == 'full' %}★{% elif star == 'half' %}½{% else %}☆{% endif %}
                    {% endfor %}
                </span>
            </p>
        </div>
    </div>

    <div class="grid-restaurants">
        {% for item in itemList %}
        <div class="card" style="padding: 0; position: relative;">
            <img src="{{ item.picture }}"
                style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px 12px 0 0;"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300?text=No+Image';">
            <div style="padding: 1.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <h3 style="font-size: 1.2rem;">{{ item.name }}</h3>
                    <span
                        style="background: var(--surface-color); padding: 5px 10px; border-radius: 20px; font-weight: bold; border: 1px solid #ddd;">₹{{
                        item.price }}</span>
                </div>
                <p class="text-muted mb-1" style="font-size: 0.9rem;">{{ item.description }}</p>

                <div style="display: flex; justify-content: space-between; align-items: center;">
                    {% if item.vegeterian %}
                    <span style="color: green; font-size: 0.8rem;">● Veg</span>
                    {% else %}
                    <span style="color: red; font-size: 0.8rem;">● Non-Veg</span>
                    {% endif %}

                    <a href="{% url 'add_to_cart' item.id username %}" class="btn btn-outline"
                        style="padding: 5px 15px;">+ Add</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}